from JSB_tools.list_reader import MaestroListFile
from analysis import Shot
from JSB_tools import mpl_hist
import numpy as np
from matplotlib import pyplot as plt
from JSB_tools.nuke_data_tools import Nuclide

Shot.nickel_list().plotly(remove_baseline=True, convolve_overlay_sigma=1, time_step=2.5*60, erg_max=1200,
                          time_bin_width=3*60)

# for shot in Shot.find_shots(eval_func="self.shotnum != 140"):
#     shots_times[shot.shotnum] = shot.list.times[-1]
#
# shots_times = {k: v for k, v in sorted(shots_times.items(), key=lambda k_v: -k_v[-1])}


# print(shots_times)
#
# # Shot(134).list.plotly(convolve_overlay_sigma=1, erg_max=2000)
#
# time_bins = np.arange(0, 400, 20)
# Shot(134).list.plot_time_dependence(Nuclide.from_symbol("Rb90_m1").decay_gamma_lines[0].erg.n, time_bins, debug_plot=True)
# plt.show()
"""
Shot times
{3: 1052.8379078, 129: 922.8043111999999, 130: 850.7897150000001, 37: 728.6793576000001, 99: 717.052457, 100: 701.5345649999999, 101: 686.6885722000001, 4: 675.5279134, 132: 665.6604942000001, 75: 651.2527696, 131: 649.5256874, 5: 625.3773648, 68: 614.3073916000001, 63: 574.8053664, 114: 569.2937576, 109: 544.7353516000001, 89: 544.342228, 116: 543.9647858000001, 110: 538.0723058000001, 66: 519.6750094, 47: 507.4783350000001, 128: 506.5826668000001, 12: 493.20163780000007, 54: 481.53730620000005, 98: 467.354867, 29: 466.9179482, 125: 462.6126756, 94: 462.4753676, 57: 460.6213618, 118: 457.6875312, 46: 457.39428360000005, 97: 456.398263, 55: 454.4176438, 14: 453.96389460000006, 28: 450.2919438, 88: 446.35419360000003, 56: 445.2496962, 33: 434.3858572, 96: 433.68327120000004, 36: 431.7139202, 102: 430.2073034, 133: 419.6452692, 49: 419.24081240000004, 65: 416.56649699999997, 64: 412.590394, 21: 411.018017, 67: 406.84184280000005, 50: 387.0478358, 34: 381.50716900000003, 62: 381.3890406, 15: 380.6375746, 134: 380.5796816000001, 7: 379.5694522, 13: 379.469418, 115: 373.0591698, 69: 369.76449020000007, 121: 369.3340366, 59: 368.28718299999997, 16: 367.3137178, 71: 366.4287802, 53: 366.3240954, 19: 364.28229539999995, 113: 362.1903818, 126: 361.96342160000006, 70: 361.9550302, 111: 360.6061996, 24: 354.81793360000006, 32: 354.54815940000003, 20: 353.10418500000003, 112: 350.5266732, 78: 344.430877, 9: 344.4117028, 127: 343.8355898, 76: 341.463306, 40: 341.21634179999995, 30: 340.2444476, 73: 340.0397904, 117: 339.29528519999997, 80: 339.09271620000004, 48: 334.1549216, 25: 334.14285359999997, 83: 331.75882839999997, 93: 331.0325388, 74: 328.4742924, 35: 327.5601744, 120: 325.33523420000006, 51: 323.3863668000001, 10: 321.99969639999995, 85: 321.58271679999996, 122: 321.225588, 124: 319.2618126, 84: 315.84177220000004, 11: 314.97030440000003, 86: 312.41054440000005, 27: 310.76880760000006, 91: 310.367747, 72: 310.0752134, 135: 309.29382680000003, 107: 307.2421106, 139: 306.4347526, 22: 304.88354879999997, 103: 302.3974682, 138: 302.0489208, 8: 301.1392006, 105: 300.8882856, 108: 299.7208202, 104: 299.3784102, 31: 297.4682026, 17: 297.16577, 38: 295.57851300000004, 60: 292.6816118, 90: 291.0175588, 39: 291.0033534, 92: 287.9769648, 26: 286.28194460000003, 52: 285.2582232, 61: 281.0357066, 58: 280.65568840000003, 77: 280.53369899999996, 106: 278.5133684, 18: 275.13203440000007, 81: 273.76972059999997, 45: 271.500227, 41: 269.16371740000005, 23: 267.871838, 79: 254.16160979999998, 87: 243.1123608, 1: 222.48950100000002, 137: 211.944469, 95: 201.63655020000002, 2: 165.3814864}

"""